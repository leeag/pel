{% extends 'base.html' %}

{% block title %}
    {{ app_name }}
{% endblock %}

{% block content %}
    <div class="row">
        {% include 'forecasts_sidebar_filter.html' %}
        <div class="col-sm-10">
            {% for el in data %}
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="well">
                            <h4>
                                <a href="{% url 'individual_forecast' id=el.id %}">{{ el.forecast_question }}</a>
                            </h4>
                        </div>
                        <div>
                            {% if el.forecast_areas or el.forecast_regions %}
                            <span class="label label-default">Tags(areas):</span>
                            {% for tag in el.forecast_areas %}
                                <a href="{{ request.path }}?tag={{ tag }}"><span class="label label-success">{{ FORECAST_AREAS|get_item:tag|default_if_none:"" }}</span></a>
                            {% endfor %}
                            <div class="pull-right">{{ el.forecasters }} forecaster{{ el.forecasters|pluralize }}</div>
                            <span class="label label-default">Tags(regions):</span>
                            {% for tag in el.forecast_regions %}
                                    <a href="{{ request.path }}?tag={{ tag }}"><span
                                        class="label label-success">{{ FORECAST_REGIONS|get_item:tag|default_if_none:""}}</span></a>
                            {% endfor %}
                        {% endif %}
                        </div>
                    </div>
                    <div class="panel-body">
                    <div class="col-sm-9">
                        <div class="forecast-chart" forecast-id="{{ el.id }}" id="peleus-home-page-chart-{{ el.id }}">
                            {% if not el.votes %}
                                <p>No current forecast's votes!</p>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="panel panel-default peleus-scrollable-block">
                            <div class="panel-heading">
                                <h3 class="panel-title">Related Media</h3>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    {% for media in el.forecastmedia_set.all %}
                                        <div class="col-sm-12">
                                            <a href="{{ media.url }}" target="_blank" class="thumbnail">
                                                <img src="{{ media.image.url }}" alt="{{ media.name }}">
                                            </a>
                                            <h4><a href="{{ media.url }}" target="_blank"> {{ media.name }}</a></h4>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                    {% comment %}<div class="panel-footer">Panel footer</div>{% endcomment %}
                </div>
                <br>
                {% empty %}
                    <h1 class="jumbotron">No forecasts</h1>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block postbodyscripts %}
    {% load staticfiles %}
    <script src="{% static '1p/home_page_charts.js' %}"></script>
{% endblock %}