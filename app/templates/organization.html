{% extends "base.html" %}
{% block headerscripts %}
<script src="http://code.highcharts.com/highcharts.js"></script>
{% endblock %}

{% block content %}
    {% include "chart_settings.html" %}

    <div class="panel col-md-12">
      <div class="row">
        <div class="col-md-6"><h2>{{organization}}'s Homepage</h2></div>
        <div class="panel row-panel col-md-6">
            <h4>{{organization}}'s Performance</h4>
            <p>{{app_name}} Score: XX.X</p>
            <p>General Accuracy: XX.X%</p>
            <p>Number of Forecasts: {{len_forecasts}}</p>
        </div>
      </div>
    </div>
    
    {%if forecasts%}
    <div class="panel col-md-12">
      {%for forecast in forecasts %}
      <h3><a href="{% url 'forecast' %}?forecast_id={{forecast.forecast_id}}">{{forecast.forecast_question}}</h3>
              <div id="timechart{{forecast.forecast_id}}" class=""></div>
              <script>
                $(function () { 
                    $('#timechart{{forecast.forecast_id}}').highcharts({
                        chart: {
                            type: 'line',
                        },

                        title: {
                              text: null,
                        },
                        
                        xAxis: {
                          type: 'datetime',
                          title: {
                            text: 'Time'
                          }
                        },
                        yAxis: {
                            title: {
                                text: 'Probability'
                            },
                            max: 100,
                        },
                        series: [{
                            name: '{{organization}} Average',
                            data: [{% for point in forecast.time_series %}[{{point.timestamp}},{{point.answer}}], {%endfor%}]
                        }]
                    });
                  
                });
              </script>
        {% endfor %}
        </div>
      {%endif%}
{% endblock %}